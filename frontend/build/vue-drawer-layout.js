!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e():"function"==typeof define&&define.amd?define(e):e()}(0,function(){"use strict";var t=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,a=!1,o=void 0;try{for(var s,r=t[Symbol.iterator]();!(n=(s=r.next()).done)&&(i.push(s.value),!e||i.length!==e);n=!0);}catch(t){a=!0,o=t}finally{try{!n&&r.return&&r.return()}finally{if(a)throw o}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();!function(){if("undefined"!=typeof document){var t=document.head||document.getElementsByTagName("head")[0],e=document.createElement("style"),i=".drawer-layout[data-v-7e696ca1] { position: absolute; top: 0; left: 0; bottom: 0; right: 0; overflow: hidden; } .drawer-wrap[data-v-7e696ca1] { position: absolute; top: 0; bottom: 0; transform: translateZ(0); } .content-wrap[data-v-7e696ca1] { position: absolute; top: 0; right: 0; bottom: 0; left: 0; overflow: hidden; transform: translateZ(0); } .drawer-mask[data-v-7e696ca1] { position: absolute; top: 0; right: 0; bottom: 0; left: 0; background-color: #000; z-index: 818; } .moving[data-v-7e696ca1] { transition: transform 0.3s ease; } .will-change[data-v-7e696ca1] { will-change: transform; } ";e.type="text/css",e.styleSheet?e.styleSheet.cssText=i:e.appendChild(document.createTextNode(i)),t.appendChild(e)}}();var e=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",null,e)}catch(t){}return t}(),i="ontouchstart"in window?{down:"touchstart",move:"touchmove",up:"touchend"}:{down:"mousedown",move:"mousemove",up:"mouseup"},n={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"drawer-layout"},[i("div",{staticClass:"drawer-wrap",class:{moving:t.moving,"will-change":t.willChange},style:{zIndex:t.zIndex,width:t.width+"px",left:"-"+Math.ceil(t.width*t.moveRate)+"px",transform:"translate3d("+Math.ceil(t.pos*t.moveRate)+"px,0,0)"}},[t._t("drawer")],2),t._v(" "),i("div",{staticClass:"content-wrap",class:{moving:t.moving,"will-change":t.willChange},style:t.contentDrawable?{transform:"translate3d("+t.pos+"px,0,0)"}:{}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.backdrop&&t.pos,expression:"backdrop && pos"}],staticClass:"drawer-mask",style:{opacity:t.backdropOpacity},on:{click:t.handleMaskClick}}),t._v(" "),t._t("content")],2)])},staticRenderFns:[],_scopeId:"data-v-7e696ca1",name:"vue-drawer-layout",props:{drawerWidth:{type:Number},drawableDistance:{type:Number},zIndex:{type:Number,default:818},contentDrawable:{type:Boolean,default:!1},backdrop:{type:Boolean,default:!0},backdropOpacityRange:{type:Array,default:function(){return[0,.4]},validator:function(e){var i=t(e,2),n=i[0],a=i[1];return n<a&&n>=0&&a<=1}},enable:{type:Boolean,default:!0},animatable:{type:Boolean,default:!0}},data:function(){return{width:this.drawerWidth,distance:this.drawableDistance,pos:0,visible:!1,moving:!1,willChange:!1}},methods:{toggle:function(t){void 0===t&&(t=!this.visible),this.visible=t,this.pos=t?this.width:0,this.moving=!0},handleMaskClick:function(){this.moving||this.$emit("mask-click")}},watch:{moving:function(){this.animatable||(this.moving=!1)},willChange:function(){this.animatable||(this.willChange=!1)}},computed:{backdropOpacity:function(){var e=this.backdropOpacityRange,i=this.pos,n=this.width,a=t(e,2);return a[0]+a[1]*(i/n)||0},moveRate:function(){var t=this.width;return this.distance/t}},mounted:function(){var t=this,n=this.$el,a=.8*parseInt(window.getComputedStyle(this.$el.parentNode).width);this.width=this.width||a,this.distance=this.distance||a;var o=this.width,s=void 0,r=void 0,d=void 0,l=void 0,c=void 0,h=void 0,v=void 0,u=void 0,p=void 0,m=void 0,f=function(t){this.enable&&(this.willChange=!0,m=void 0,h=l=t.clientX||t.changedTouches[0].clientX,c=t.clientY||t.changedTouches[0].clientY,r=+new Date,p=this.pos,n.addEventListener(i.move,w,!!e&&{passive:!0}),n.addEventListener(i.up,b,!!e&&{passive:!0}),this.$emit("slide-start"))}.bind(this),w=function(t){s=r,r=+new Date,u=h,h=t.clientX||t.changedTouches[0].clientX,v=t.clientY||t.changedTouches[0].clientY,d=(h-u)/(r-s);var i=p+h-l;i=Math.min(o,i),i=Math.max(0,i),void 0===m&&(m=Math.abs(v-c)/Math.abs(h-l)>Math.sqrt(3)/3),m||(e||t.preventDefault(),this.pos=i,this.$emit("slide-move",i))}.bind(this),b=function(t){if(void 0!==m){if(!m){var a=this.pos;this.visible=d>0?(o-a)/d<500||a>3*o/5:!((0-a)/d<500||a<3*o/5),this.pos>0&&this.pos<o&&(this.moving=!0)}this.pos=this.visible?o:0}this.moving||(this.willChange=!1,this.$emit("slide-end",this.visible)),m=void 0,n.removeEventListener(i.move,w,!!e&&{passive:!0}),n.removeEventListener(i.up,b,!!e&&{passive:!0})}.bind(this);"transitionend webkitTransitionEnd msTransitionEnd otransitionend oTransitionEnd".split(" ").forEach(function(e){t.$el.addEventListener(e,function(){t.moving&&(t.moving=!1,t.willChange=!1,t.pos=t.visible?o:0,t.$emit("slide-end",t.visible))},!1)}),n.addEventListener(i.down,f,!!e&&{passive:!0})}};module.exports={DrawerLayout:n,install:function t(e){t.installed||e.component(n.name,n)}},module.exports.default=module.exports});
