webpackJsonp([4],{"7la1":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("IAZU"),n=i("rOtF"),a=i("WcJj"),c=void 0,o=void 0,r={data:function(){return{inputElementHeight:0,inputText:""}},components:{ContentEditable:a.a},watch:{inputElementHeight:function(){var t=this;this.$nextTick(function(){t.$emit("height-change",parseInt(window.getComputedStyle(t.$el).height))})}},computed:{inputWrapHeight:function(){return this.inputElementHeight}},methods:{send:function(){},handleInput:function(t){this.inputElementHeight=parseInt(window.getComputedStyle(c).height)}},mounted:function(){c=document.querySelector(".input-text"),o=parseInt(window.getComputedStyle(c).height),this.inputElementHeight=o}},l=i("XyMi");var u=function(t){i("ymUb")},d=Object(l.a)(r,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"option-bar"},[i("div",{staticClass:"input-wrap",style:{height:t.inputWrapHeight+"px"}},[i("content-editable",{staticClass:"input-text",on:{input:t.handleInput},model:{value:t.inputText,callback:function(e){t.inputText=e},expression:"inputText"}}),t._v(" "),i("a",{staticClass:"input-button",class:{disabled:!t.inputText.length},attrs:{href:"javascript:void(0)"},on:{click:t.send}},[t._v("发送")])],1),t._v(" "),t._m(0)])},[function(){var t=this.$createElement,e=this._self._c||t;return e("ul",{staticClass:"option-button-group"},[e("li",[e("i",{staticClass:"c-icon-audio"})]),this._v(" "),e("li",[e("i",{staticClass:"c-icon-image"})]),this._v(" "),e("li",[e("i",{staticClass:"c-icon-camera"})]),this._v(" "),e("li",[e("i",{staticClass:"c-icon-bonus"})]),this._v(" "),e("li",[e("i",{staticClass:"c-icon-gif"})]),this._v(" "),e("li",[e("i",{staticClass:"c-icon-smile"})]),this._v(" "),e("li",[e("i",{staticClass:"c-icon-add-circle"})])])}],!1,u,"data-v-1ac002f8",null).exports,h={components:{ChatHeader:s.a,ChatContent:n.a,ChatOptionBar:d},data:function(){return{contentBottomOffset:0,messages:[],total:[],filter:{page:0,size:10}}},computed:{messageGroups:function(){var t=this.messages,e=0,i=0,s=[],n=[];return t.forEach(function(t,a){0===a?e=i=t.sendTime:(i=e,(e=t.sendTime)-i>=18e4?(n=n.concat(s),s=[]):s.push(t))}),n}},methods:{showTimeStamp:function(t,e){var i=this.messages[e-1];return!i||t.sendTime-i.sendTime>=18e4},handleReturnBtnClick:function(){this.$router.back()},handleHeightChange:function(t){this.contentBottomOffset=t}},created:function(){var t=0;this.messages=new Array(100).fill(void 0).map(function(e,i){var s=Math.round(Math.random()),n=+new Date;return{id:i+1,from_user_id:s,from_user_name:["老夫子","豆豆儿"][s],to_user_id:+!s,sendTime:n+(t+=18e4*+(i%3==0)),content:"软工 刘峰：明天早上过去\n软工 刘峰：明天早上过去"}})}};var m=function(t){i("D1tj")},v=Object(l.a)(h,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"wrap"},[i("chat-header",[i("div",{staticClass:"head-title",attrs:{slot:"middle"},slot:"middle"},[i("div",{staticClass:"name"},[t._v("老夫子")]),t._v(" "),i("div",{staticClass:"status"},[t._v("在线")])]),t._v(" "),i("a",{staticClass:"head-btn",attrs:{slot:"left",href:"javascript:void(0)"},on:{click:t.handleReturnBtnClick},slot:"left"},[i("i",{staticClass:"c-icon-arrow-left"})]),t._v(" "),i("a",{staticClass:"head-btn",attrs:{slot:"right",href:"javascript:void(0)"},slot:"right"},[i("i",{staticClass:"c-icon-add"})])]),t._v(" "),i("chat-content",{style:t.contentBottomOffset?{bottom:t.contentBottomOffset+"px"}:{}},[i("div",{staticClass:"message-list"},t._l(t.messages,function(e,s){return i("div",{key:e.id,class:{"is-mine":0===e.from_user_id}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.showTimeStamp(e,s),expression:"showTimeStamp(item,index)"}],staticClass:"message-time"},[t._v(t._s(t._f("time")(e.sendTime,"HH:mm")))]),t._v(" "),i("div",{staticClass:"message-item"},[i("div",{staticClass:"message-item-block block-left"},[i("div",{directives:[{name:"show",rawName:"v-show",value:0!==e.from_user_id,expression:"item.from_user_id !== 0"}],staticClass:"avatar-wrap"},[i("img",{attrs:{src:"//static.codehuang.com/upload/avatars/default.png"}})])]),t._v(" "),i("div",{staticClass:"message-item-block block-center"},[i("div",{staticClass:"message-content-wrap"},[i("div",{staticClass:"message-content"},[t._v(t._s(e.content))])])]),t._v(" "),i("div",{staticClass:"message-item-block block-right"},[i("div",{directives:[{name:"show",rawName:"v-show",value:0===e.from_user_id,expression:"item.from_user_id === 0"}],staticClass:"avatar-wrap"},[i("img",{attrs:{src:"//static.codehuang.com/upload/avatars/default.png"}})])])])])}))]),t._v(" "),i("chat-option-bar",{on:{"height-change":t.handleHeightChange}})],1)},[],!1,m,"data-v-33496c48",null);e.default=v.exports},D1tj:function(t,e){},GMOA:function(t,e){},IAZU:function(t,e,i){"use strict";var s=i("XyMi");var n=function(t){i("r7Rv")},a=Object(s.a)({props:["pageTitle"],data:function(){return{}},computed:{},components:{}},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"header"},[e("div",{staticClass:"header-left"},[this._t("left")],2),this._v(" "),this._t("middle"),this._v(" "),e("div",{staticClass:"header-right"},[this._t("right")],2)],2)},[],!1,n,"data-v-3fb04dbf",null);e.a=a.exports},WcJj:function(t,e,i){"use strict";var s={name:"content-editable",props:{value:{type:String,default:""},canEdit:{type:Boolean,default:!0}},data:function(){return{innerText:this.value,isLocked:!1}},watch:{value:function(){this.isLocked&&this.innerText||(this.innerText=this.value)}},methods:{input:function(){this.$emit("input",this.$el.innerHTML)}}},n=i("XyMi");var a=function(t){i("dDUR")},c=Object(n.a)(s,function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"content-editable",attrs:{contenteditable:t.canEdit},domProps:{innerHTML:t._s(t.innerText)},on:{focus:function(e){t.isLocked=!0},blur:function(e){t.isLocked=!1},input:t.input}})},[],!1,a,null,null);e.a=c.exports},dDUR:function(t,e){},r7Rv:function(t,e){},rOtF:function(t,e,i){"use strict";var s=i("XyMi");var n=function(t){i("GMOA")},a=Object(s.a)({components:{},computed:{},methods:{},created:function(){}},function(){var t=this.$createElement;return(this._self._c||t)("section",{staticClass:"container"},[this._t("default")],2)},[],!1,n,"data-v-4792037e",null);e.a=a.exports},ymUb:function(t,e){}});
//# sourceMappingURL=4.de00c5272bfde00143cb.js.map