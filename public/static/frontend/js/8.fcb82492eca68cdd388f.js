webpackJsonp([8],{"5YLH":function(e,t){},"6OxN":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("//Fk"),r=n.n(i),o=n("woOf"),l=n.n(o),s=(n("7+uW"),n("DyH8")),a=n("c2kk"),u={data:function(){return{menus:[],menuProps:{children:"children",label:"title"},menu:{id:0,title:"",parent_id:0,parent_title:"",route:"",is_enabled:!0,children:[]},rules:{title:[{required:!0,message:"请输入菜单名称",trigger:"blur"},{max:10,message:"长度在10个字符以内",trigger:"blur"}],route:[{required:!0,message:"请输入菜单地址",trigger:"blur"}]},isEdit:!1,isLoading:!1}},methods:{init:function(){this.query()},query:function(){var e=this;this.isLoading=!0,a.a.query().then(function(t){s.a.arrayToTree(t).then(function(t){e.menus=t,e.isLoading=!1})})},resetForm:function(){this.$refs.menuForm.resetFields()},onSubmit:function(){var e=this;this.$refs.menuForm.validate(function(t){if(!t)return console.log("error submit!!"),!1;var n=l()({},e.menu),i=n.id;n.id=void 0,n.parent_title=void 0,n.children=void 0,r.a.resolve(i?a.a.update(i,n):a.a.create(n)).then(function(t){e.onCancel(),e.query()})})},onCancel:function(){this.isEdit=!1},refreshMenu:function(){},handleNodeClick:function(e){},onAdd:function(e){l()(this.menu,{id:0,title:"",parent_id:e.id,parent_title:e.title,route:"",is_enabled:!0}),this.isEdit=!0},onEdit:function(e){l()(this.menu,e),this.isEdit=!0},onRemove:function(e){var t=this;this.$confirm("此操作将永久删除该菜单及其子菜单, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.a.remove(e.id).then(function(e){t.$message({type:"success",message:"删除成功!"}),t.query()})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},renderContent:function(e,t){var n=this,i=t.node,r=t.data;t.store;return e("span",null,[e("span",{class:"el-tree-node__label"},[e("span",null,i.label+(r.route?" ---- "+r.route:""))]),e("span",{class:"option-button-group"},[e("el-button",{style:i.level<3?"":"display:none;",attrs:{type:"success",size:"mini",icon:"plus"},on:{click:function(){return n.onAdd(r)}}},[""]),e("el-button",{style:r.parent_id?"":"display:none;",attrs:{type:"info",size:"mini",icon:"edit"},on:{click:function(){return n.onEdit(r)}}},[""]),e("el-button",{style:r.parent_id&&!r.children.length?"":"display:none;",attrs:{type:"danger",size:"mini",icon:"delete","v-popover":"popover5"},on:{click:function(){return n.onRemove(r)}}},[""])])])}},created:function(){this.init()}},c={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}]},[n("el-row",{staticClass:"toolbar"},[n("div",{staticClass:"pull-right"},[n("el-button",{attrs:{type:"danger"},on:{click:e.refreshMenu}},[e._v("批量删除")]),e._v(" "),n("el-button",{attrs:{type:"primary",loading:!0},on:{click:e.refreshMenu}},[e._v("刷新菜单")])],1)]),e._v(" "),n("el-row",[n("el-col",{attrs:{span:8}},[n("el-tree",{attrs:{data:e.menus,"show-checkbox":"","default-expand-all":!0,"expand-on-click-node":!1,"node-key":"id","render-content":e.renderContent,props:e.menuProps},on:{"node-click":e.handleNodeClick}})],1),e._v(" "),n("el-col",{directives:[{name:"show",rawName:"v-show",value:e.isEdit,expression:"isEdit"}],attrs:{span:16}},[n("el-form",{ref:"menuForm",attrs:{model:e.menu,rules:e.rules,"label-width":"120px"}},[n("el-form-item",{attrs:{label:"父节点名称"}},[n("span",[e._v(e._s(e.menu.parent_title))])]),e._v(" "),n("el-form-item",{attrs:{label:"菜单名称",prop:"title"}},[n("el-input",{attrs:{placeholder:"请选择菜单名称"},model:{value:e.menu.title,callback:function(t){e.$set(e.menu,"title",t)},expression:"menu.title"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"菜单地址",prop:"route"}},[n("el-input",{attrs:{placeholder:"请选择菜单地址"},model:{value:e.menu.route,callback:function(t){e.$set(e.menu,"route",t)},expression:"menu.route"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"是否启用"}},[n("el-switch",{attrs:{"on-text":"","off-text":""},model:{value:e.menu.is_enabled,callback:function(t){e.$set(e.menu,"is_enabled",t)},expression:"menu.is_enabled"}})],1),e._v(" "),n("el-form-item",{attrs:{"label-width":"120px"}},[n("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v(e._s(e.menu.id?"更新":"新增"))]),e._v(" "),n("el-button",{on:{click:e.onCancel}},[e._v("取消")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var d=n("VU/8")(u,c,!1,function(e){n("5YLH")},null,null);t.default=d.exports}});
//# sourceMappingURL=8.fcb82492eca68cdd388f.js.map