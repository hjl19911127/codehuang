{"version":3,"sources":["webpack:///src/sites/seek/views/Game.vue","webpack:///./src/sites/seek/views/Game.vue?2ce9","webpack:///./src/sites/seek/views/Game.vue"],"names":["mouseX","playerWidth","Game","_this","this","player","speed","x","y","distanceY","distanceX","rate","ySpeed","refresh","clientX","clientY","startMoving","movement","width","views_Game","render","_h","$createElement","_c","_self","staticClass","on","mousemove","handleMouseMove","mouseleave","handleMouseLeave","style","transform","map","_v","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"mHAeAA,EAAA,MACAC,EAAA,EACAC,gCAIA,UAEA,IAEA,aAEA,IAGA,iDAIA,IAAAC,EAAAC,kEACA,IAAAC,EAAAF,EAAAE,eACAC,EAAAH,EAAAG,YACAC,QACAC,qBACAC,kBAEA,8BAGAC,mBACAD,cACAC,cACAD,OAEAE,OAAA,kBAEAL,uBAEAA,MACA,cACAG,iCACAC,aACAC,SACAC,8CAGAC,OAIAA,sCAIAC,YACAC,4BAEAC,qFAGAC,wBACA,qEAKA,iDACAC,iEACA,2DACA,ICjFAC,GADiBC,OAFjB,WAA0B,IAAaC,EAAbjB,KAAakB,eAA0BC,EAAvCnB,KAAuCoB,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,UAAoBF,EAAA,OAAYE,YAAA,WAAAC,IAA2BC,UAA3IvB,KAA2IwB,gBAAAC,WAA3IzB,KAA2I0B,oBAAmEP,EAAA,OAAYE,YAAA,MAAAM,OAA0BC,UAAA,gBAApP5B,KAAoP6B,IAAA1B,EAAA,OAApPH,KAAoP6B,IAAAzB,EAAA,WAApPJ,KAAiU8B,GAAA,KAAAX,EAAA,OAAwBE,YAAA,gBAElWU,oBCCjB,IAcAC,EAdAC,EAAA,OAcAC,CACApC,EACAiB,GATA,EAVA,SAAAoB,GACAF,EAAA,SAaA,kBAEA,MAUAG,EAAA,QAAAJ,EAAA","file":"static/frontend/js/7.103203a31459c4d6d331.js","sourcesContent":["<template>\n  <div class=\"scene\">\n    <div class=\"viewport\" @mousemove=\"handleMouseMove\" @mouseleave=\"handleMouseLeave\">\n      <div class=\"map\" :style=\"{transform:`translate3d(${-map.x}px,${-map.y}px,0)`}\">\n\n      </div>\n      <div class=\"player\">\n\n      </div>\n    </div>\n  </div>\n</template>\n<script>\n  import {mapGetters} from 'vuex'\n\n  const MAX_SPEED = 20;\n  let mouseX = 0, mouseY = 0;\n  let playerWidth = 0;\n  export default {\n    data() {\n      return {\n        speed: 10,\n        map: {\n          x: 0,\n          y: 0\n        },\n        player: {\n          x: 0,\n          y: 0\n        }\n      }\n    },\n    computed: {},\n    methods: {\n      startMoving() {\n        let refresh = () => {\n          let {player, map, speed} = this;\n          let distanceX = mouseX - player.x,\n            distanceY = mouseY - player.y,\n            distance = Math.sqrt(distanceX * distanceX + distanceY * distanceY);\n          if (distance < playerWidth / 2) {\n            this.movement = null;\n            return;\n          }\n          let dirX = distanceX && distanceX / Math.abs(distanceX),\n            dirY = distanceY && distanceY / Math.abs(distanceY);\n          distanceX = Math.abs(distanceX);\n          distanceY = Math.abs(distanceY)\n          let rate;\n\n          if (distanceX === 0) {\n            map.y += dirY * speed;\n          } else if (distanceY === 0) {\n            map.x += dirX * speed;\n          } else {\n            rate = Math.abs(distanceX / distanceY);\n            let ySpeed = speed * Math.sin(Math.atan2(distanceY, distanceX));\n            map.x += dirX * ySpeed * rate;\n            map.y += dirY * ySpeed;\n          }\n          this.movement = requestAnimationFrame(() => {\n            refresh()\n          })\n        };\n        this.movement = requestAnimationFrame(() => {\n          refresh()\n        })\n      },\n      handleMouseMove(e) {\n        mouseX = e.clientX;\n        mouseY = e.clientY;\n        if (this.movement) return;\n        this.startMoving()\n      },\n      handleMouseLeave(e) {\n        this.movement && cancelAnimationFrame(this.movement)\n        this.movement = null;\n      }\n    },\n    components: {},\n    mounted() {\n      let playerDom = document.querySelector('.player');\n      playerWidth = parseInt(window.getComputedStyle(playerDom).width)\n      this.player.x = parseInt(window.getComputedStyle(playerDom).left) + playerWidth / 2\n      this.player.y = parseInt(window.getComputedStyle(playerDom).top) + playerWidth / 2\n    }\n  }\n</script>\n<style lang=\"stylus\" scoped>\n  playerSize = 5vw;\n  .scene {\n    position: absolute\n    left: 0\n    top: 0\n    right: 0\n    bottom: 0\n    background-color: #909399\n  }\n\n  .viewport {\n    position: absolute\n    left: 400px\n    top: 0\n    right: 400px\n    bottom: 80px\n    border 2px solid #fff\n    overflow: hidden\n  }\n\n  .map {\n    position: absolute\n    background-image: linear-gradient(45deg, #555 25%, transparent 25%, transparent), linear-gradient(-45deg, #555 25%, transparent 25%, transparent), linear-gradient(45deg, transparent 75%, #555 75%), linear-gradient(-45deg, transparent 75%, #555 75%);\n    width: 200vw\n    height: 200vw\n  }\n\n  .player {\n    position: fixed\n    top: 50%\n    left: 50%\n    margin-left - playerSize / 2\n    margin-top - playerSize / 2\n    width: playerSize\n    height: playerSize\n    background-color: lightyellow\n    border-radius 50%\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/sites/seek/views/Game.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"scene\"},[_c('div',{staticClass:\"viewport\",on:{\"mousemove\":_vm.handleMouseMove,\"mouseleave\":_vm.handleMouseLeave}},[_c('div',{staticClass:\"map\",style:({transform:(\"translate3d(\" + (-_vm.map.x) + \"px,\" + (-_vm.map.y) + \"px,0)\")})}),_vm._v(\" \"),_c('div',{staticClass:\"player\"})])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-3bcd0fcc\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/sites/seek/views/Game.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-3bcd0fcc\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Game.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Game.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Game.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3bcd0fcc\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Game.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-3bcd0fcc\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/sites/seek/views/Game.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}