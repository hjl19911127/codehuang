{"version":3,"sources":["webpack:///static/frontend/js/8.677dc61cdc093181c134.js","webpack:///./src/sites/admin/views/menu/index.vue","webpack:///src/sites/admin/views/menu/index.vue","webpack:///./src/sites/admin/views/menu/index.vue?7faf","webpack:///./src/sites/admin/views/menu/index.vue?9da9","webpack:///./src/sites/admin/views/menu/index.vue?4365"],"names":["webpackJsonp","6OxN","module","__webpack_exports__","__webpack_require__","injectStyle","ssrContext","Object","defineProperty","value","promise","promise_default","n","object_assign","assign_default","async_tree","menu","views_menu","data","menus","menuProps","children","label","id","title","parent_id","parent_title","route","is_enabled","rules","required","message","trigger","max","isEdit","isLoading","methods","init","this","query","_this","then","res","arrayToTree","tree","resetForm","$refs","resetFields","onSubmit","_this2","validate","valid","console","log","body","undefined","a","resolve","update","create","onCancel","refreshMenu","handleNodeClick","onAdd","onEdit","onRemove","_this3","$confirm","confirmButtonText","cancelButtonText","type","remove","$message","catch","renderContent","h","_ref","_this4","node","store","class","style","level","attrs","size","icon","on","click","length","v-popover","created","render","_vm","_h","$createElement","_c","_self","directives","name","rawName","expression","staticClass","_v","loading","span","show-checkbox","default-expand-all","expand-on-click-node","node-key","render-content","props","node-click","ref","model","label-width","_s","prop","placeholder","callback","$$v","$set","on-text","off-text","staticRenderFns","esExports","admin_views_menu","normalizeComponent","__vue_styles__","Component","oY9j","exports","content","i","locals","z7zx","push","version","sources","names","mappings","file","sourcesContent","sourceRoot"],"mappings":"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","file":"static/frontend/js/8.677dc61cdc093181c134.js","sourcesContent":["webpackJsonp([8],{\n\n/***/ \"6OxN\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n\n// EXTERNAL MODULE: ./node_modules/babel-runtime/core-js/promise.js\nvar promise = __webpack_require__(\"//Fk\");\nvar promise_default = /*#__PURE__*/__webpack_require__.n(promise);\n\n// EXTERNAL MODULE: ./node_modules/babel-runtime/core-js/object/assign.js\nvar object_assign = __webpack_require__(\"woOf\");\nvar assign_default = /*#__PURE__*/__webpack_require__.n(object_assign);\n\n// EXTERNAL MODULE: ./node_modules/vue/dist/vue.esm.js\nvar vue_esm = __webpack_require__(\"7+uW\");\n\n// EXTERNAL MODULE: ./src/utils/async-tree.js\nvar async_tree = __webpack_require__(\"DyH8\");\n\n// EXTERNAL MODULE: ./src/sites/admin/api/menu.js\nvar menu = __webpack_require__(\"c2kk\");\n\n// CONCATENATED MODULE: ./node_modules/babel-loader/lib!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/sites/admin/views/menu/index.vue\n\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n\n\n/* harmony default export */ var views_menu = ({\n  data: function data() {\n    return {\n      menus: [],\n      menuProps: {\n        children: 'children',\n        label: 'title'\n      },\n      menu: {\n        id: 0,\n        title: '',\n        parent_id: 0,\n        parent_title: '',\n        route: '',\n        is_enabled: true,\n        children: []\n      },\n      rules: {\n        title: [{ required: true, message: '请输入菜单名称', trigger: 'blur' }, { max: 10, message: '长度在10个字符以内', trigger: 'blur' }],\n        route: [{ required: true, message: '请输入菜单地址', trigger: 'blur' }]\n      },\n      isEdit: false,\n      isLoading: false\n    };\n  },\n\n  methods: {\n    init: function init() {\n      this.query();\n    },\n    query: function query() {\n      var _this = this;\n\n      this.isLoading = true;\n      menu[\"a\" /* default */].query().then(function (res) {\n        async_tree[\"a\" /* default */].arrayToTree(res).then(function (tree) {\n          _this.menus = tree;\n          _this.isLoading = false;\n        });\n      });\n    },\n    resetForm: function resetForm() {\n      this.$refs['menuForm'].resetFields();\n    },\n    onSubmit: function onSubmit() {\n      var _this2 = this;\n\n      this.$refs['menuForm'].validate(function (valid) {\n        if (valid) {\n          var body = assign_default()({}, _this2.menu),\n              id = body.id;\n          body.id = undefined;\n          body.parent_title = undefined;\n          body.children = undefined;\n          promise_default.a.resolve(id ? menu[\"a\" /* default */].update(id, body) : menu[\"a\" /* default */].create(body)).then(function (res) {\n            _this2.onCancel();\n            _this2.query();\n          });\n        } else {\n          console.log('error submit!!');\n          return false;\n        }\n      });\n    },\n    onCancel: function onCancel() {\n      this.isEdit = false;\n    },\n    refreshMenu: function refreshMenu() {},\n    handleNodeClick: function handleNodeClick(data) {\n      //        this.onEdit(data);\n    },\n    onAdd: function onAdd(data) {\n      assign_default()(this.menu, {\n        id: 0,\n        title: '',\n        parent_id: data.id,\n        parent_title: data.title,\n        route: '',\n        is_enabled: true\n      });\n      this.isEdit = true;\n    },\n    onEdit: function onEdit(data) {\n      assign_default()(this.menu, data);\n      this.isEdit = true;\n    },\n    onRemove: function onRemove(data) {\n      var _this3 = this;\n\n      this.$confirm('此操作将永久删除该菜单及其子菜单, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(function () {\n        menu[\"a\" /* default */].remove(data.id).then(function (res) {\n          _this3.$message({\n            type: 'success',\n            message: '删除成功!'\n          });\n          _this3.query();\n        });\n      }).catch(function () {\n        _this3.$message({\n          type: 'info',\n          message: '已取消删除'\n        });\n      });\n    },\n    renderContent: function renderContent(h, _ref) {\n      var _this4 = this;\n\n      var node = _ref.node,\n          data = _ref.data,\n          store = _ref.store;\n\n      return h(\"span\", null, [h(\"span\", { \"class\": \"el-tree-node__label\" }, [h(\"span\", null, '' + node.label + (data.route ? ' ---- ' + data.route : ''))]), h(\"span\", { \"class\": \"option-button-group\" }, [h(\"el-button\", {\n        style: node.level < 3 ? \"\" : \"display:none;\",\n        attrs: {\n          type: \"success\",\n          size: \"mini\",\n          icon: \"plus\"\n        },\n        on: {\n          \"click\": function click() {\n            return _this4.onAdd(data);\n          }\n        }\n      }, [\"\"]), h(\"el-button\", {\n        style: data.parent_id ? \"\" : \"display:none;\",\n        attrs: {\n          type: \"info\",\n          size: \"mini\",\n          icon: \"edit\"\n        },\n        on: {\n          \"click\": function click() {\n            return _this4.onEdit(data);\n          }\n        }\n      }, [\"\"]), h(\"el-button\", {\n        style: data.parent_id && !data.children.length ? \"\" : \"display:none;\",\n        attrs: {\n          type: \"danger\",\n          size: \"mini\",\n          icon: \"delete\",\n          \"v-popover\": \"popover5\"\n        },\n        on: {\n          \"click\": function click() {\n            return _this4.onRemove(data);\n          }\n        }\n      }, [\"\"])])]);\n    }\n  },\n  created: function created() {\n    this.init();\n  }\n});\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-2e7079d9\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/sites/admin/views/menu/index.vue\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.isLoading),expression:\"isLoading\"}]},[_c('el-row',{staticClass:\"toolbar\"},[_c('div',{staticClass:\"pull-right\"},[_c('el-button',{attrs:{\"type\":\"danger\"},on:{\"click\":_vm.refreshMenu}},[_vm._v(\"批量删除\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"loading\":true},on:{\"click\":_vm.refreshMenu}},[_vm._v(\"刷新菜单\")])],1)]),_vm._v(\" \"),_c('el-row',[_c('el-col',{attrs:{\"span\":8}},[_c('el-tree',{attrs:{\"data\":_vm.menus,\"show-checkbox\":\"\",\"default-expand-all\":true,\"expand-on-click-node\":false,\"node-key\":\"id\",\"render-content\":_vm.renderContent,\"props\":_vm.menuProps},on:{\"node-click\":_vm.handleNodeClick}})],1),_vm._v(\" \"),_c('el-col',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isEdit),expression:\"isEdit\"}],attrs:{\"span\":16}},[_c('el-form',{ref:\"menuForm\",attrs:{\"model\":_vm.menu,\"rules\":_vm.rules,\"label-width\":\"120px\"}},[_c('el-form-item',{attrs:{\"label\":\"父节点名称\"}},[_c('span',[_vm._v(_vm._s(_vm.menu.parent_title))])]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"菜单名称\",\"prop\":\"title\"}},[_c('el-input',{attrs:{\"placeholder\":\"请选择菜单名称\"},model:{value:(_vm.menu.title),callback:function ($$v) {_vm.$set(_vm.menu, \"title\", $$v)},expression:\"menu.title\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"菜单地址\",\"prop\":\"route\"}},[_c('el-input',{attrs:{\"placeholder\":\"请选择菜单地址\"},model:{value:(_vm.menu.route),callback:function ($$v) {_vm.$set(_vm.menu, \"route\", $$v)},expression:\"menu.route\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"是否启用\"}},[_c('el-switch',{attrs:{\"on-text\":\"\",\"off-text\":\"\"},model:{value:(_vm.menu.is_enabled),callback:function ($$v) {_vm.$set(_vm.menu, \"is_enabled\", $$v)},expression:\"menu.is_enabled\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label-width\":\"120px\"}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.onSubmit}},[_vm._v(_vm._s(_vm.menu.id ? '更新' : '新增'))]),_vm._v(\" \"),_c('el-button',{on:{\"click\":_vm.onCancel}},[_vm._v(\"取消\")])],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ var admin_views_menu = (esExports);\n// CONCATENATED MODULE: ./src/sites/admin/views/menu/index.vue\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"oY9j\")\n}\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  views_menu,\n  admin_views_menu,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ var sites_admin_views_menu = __webpack_exports__[\"default\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"oY9j\":\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(\"z7zx\");\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(\"rjj0\")(\"15afa488\", content, true);\n\n/***/ }),\n\n/***/ \"z7zx\":\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(\"FZ+f\")(true);\n// imports\n\n\n// module\nexports.push([module.i, \"\\n.option-button-group {\\n  float: right;\\n  margin-right: 20px;\\n}\\n/*display: none;*/\\n.el-tree-node__content:hover .option-button-group {\\n  display: block;\\n}\", \"\", {\"version\":3,\"sources\":[\"E:/mine/codehuang/frontend/src/sites/admin/views/menu/index.vue\"],\"names\":[],\"mappings\":\";AACA;EACE,aAAa;EACb,mBAAmB;CACpB;AACD,kBAAkB;AAClB;EACE,eAAe;CAChB\",\"file\":\"index.vue\",\"sourcesContent\":[\"\\n.option-button-group {\\n  float: right;\\n  margin-right: 20px;\\n}\\n/*display: none;*/\\n.el-tree-node__content:hover .option-button-group {\\n  display: block;\\n}\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/frontend/js/8.677dc61cdc093181c134.js","function injectStyle (ssrContext) {\n  require(\"!!../../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2e7079d9\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2e7079d9\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/sites/admin/views/menu/index.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div v-loading=\"isLoading\">\r\n    <el-row class=\"toolbar\">\r\n      <div class=\"pull-right\">\r\n        <el-button type=\"danger\" @click=\"refreshMenu\">批量删除</el-button>\r\n        <el-button type=\"primary\" @click=\"refreshMenu\" :loading=\"true\">刷新菜单</el-button>\r\n      </div>\r\n    </el-row>\r\n    <el-row>\r\n      <el-col :span=\"8\">\r\n        <el-tree\r\n          :data=\"menus\"\r\n          show-checkbox\r\n          :default-expand-all=\"true\"\r\n          :expand-on-click-node=\"false\"\r\n          node-key=\"id\"\r\n          @node-click=\"handleNodeClick\"\r\n          :render-content=\"renderContent\"\r\n          :props=\"menuProps\">\r\n        </el-tree>\r\n      </el-col>\r\n      <el-col :span=\"16\" v-show=\"isEdit\">\r\n        <el-form ref=\"menuForm\" :model=\"menu\" :rules=\"rules\" label-width=\"120px\">\r\n          <el-form-item label=\"父节点名称\">\r\n            <span>{{menu.parent_title}}</span>\r\n          </el-form-item>\r\n          <el-form-item label=\"菜单名称\" prop=\"title\">\r\n            <el-input v-model=\"menu.title\" placeholder=\"请选择菜单名称\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"菜单地址\" prop=\"route\">\r\n            <el-input v-model=\"menu.route\" placeholder=\"请选择菜单地址\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"是否启用\">\r\n            <el-switch on-text=\"\" off-text=\"\" v-model=\"menu.is_enabled\"></el-switch>\r\n          </el-form-item>\r\n          <el-form-item label-width=\"120px\">\r\n            <el-button type=\"primary\" @click=\"onSubmit\">{{menu.id ? '更新' : '新增'}}</el-button>\r\n            <el-button @click=\"onCancel\">取消</el-button>\r\n          </el-form-item>\r\n        </el-form>\r\n      </el-col>\r\n    </el-row>\r\n  </div>\r\n</template>\r\n<script>\r\n  import Vue from 'vue';\r\n  import asyncTree from '@/utils/async-tree';\r\n  import api from '@/sites/admin/api/menu';\r\n\r\n  export default {\r\n    data() {\r\n      return {\r\n        menus: [],\r\n        menuProps: {\r\n          children: 'children',\r\n          label: 'title'\r\n        },\r\n        menu: {\r\n          id: 0,\r\n          title: '',\r\n          parent_id: 0,\r\n          parent_title: '',\r\n          route: '',\r\n          is_enabled: true,\r\n          children: []\r\n        },\r\n        rules: {\r\n          title: [\r\n            {required: true, message: '请输入菜单名称', trigger: 'blur'},\r\n            {max: 10, message: '长度在10个字符以内', trigger: 'blur'}\r\n          ],\r\n          route: [\r\n            {required: true, message: '请输入菜单地址', trigger: 'blur'}\r\n          ]\r\n        },\r\n        isEdit: false,\r\n        isLoading: false\r\n      };\r\n    },\r\n    methods: {\r\n      init() {\r\n        this.query();\r\n      },\r\n      query() {\r\n        this.isLoading = true;\r\n        api.query().then((res) => {\r\n          asyncTree.arrayToTree(res).then((tree) => {\r\n            this.menus = tree;\r\n            this.isLoading = false;\r\n          });\r\n        })\r\n      },\r\n      resetForm() {\r\n        this.$refs['menuForm'].resetFields();\r\n      },\r\n      onSubmit() {\r\n        this.$refs['menuForm'].validate((valid) => {\r\n          if (valid) {\r\n            let body = Object.assign({}, this.menu), id = body.id;\r\n            body.id = undefined;\r\n            body.parent_title = undefined;\r\n            body.children = undefined;\r\n            Promise.resolve(id ? api.update(id, body) : api.create(body)).then(res => {\r\n              this.onCancel();\r\n              this.query();\r\n            });\r\n          } else {\r\n            console.log('error submit!!');\r\n            return false;\r\n          }\r\n        });\r\n      },\r\n      onCancel() {\r\n        this.isEdit = false;\r\n      },\r\n      refreshMenu() {\r\n\r\n      },\r\n      handleNodeClick(data) {\r\n//        this.onEdit(data);\r\n      },\r\n      onAdd(data) {\r\n        Object.assign(this.menu, {\r\n          id: 0,\r\n          title: '',\r\n          parent_id: data.id,\r\n          parent_title: data.title,\r\n          route: '',\r\n          is_enabled: true,\r\n        });\r\n        this.isEdit = true;\r\n      },\r\n      onEdit(data) {\r\n        Object.assign(this.menu, data);\r\n        this.isEdit = true;\r\n      },\r\n      onRemove(data) {\r\n        this.$confirm('此操作将永久删除该菜单及其子菜单, 是否继续?', '提示', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n        }).then(() => {\r\n          api.remove(data.id).then(res => {\r\n            this.$message({\r\n              type: 'success',\r\n              message: '删除成功!'\r\n            });\r\n            this.query();\r\n          })\r\n        }).catch(() => {\r\n          this.$message({\r\n            type: 'info',\r\n            message: '已取消删除'\r\n          });\r\n        });\r\n      },\r\n      renderContent(h, {node, data, store}) {\r\n        return h(\r\n          \"span\",\r\n          null,\r\n          [h(\r\n            \"span\",\r\n            {\"class\": \"el-tree-node__label\"},\r\n            [h(\r\n              \"span\",\r\n              null,\r\n              `${node.label}${data.route ? ` ---- ${data.route}` : ''}`\r\n            )]\r\n          ),\r\n            h(\r\n              \"span\",\r\n              {\"class\": \"option-button-group\"},\r\n              [h(\r\n                \"el-button\",\r\n                {\r\n                  style: node.level < 3 ? \"\" : \"display:none;\",\r\n                  attrs: {\r\n                    type: \"success\",\r\n                    size: \"mini\",\r\n                    icon: \"plus\"\r\n                  },\r\n                  on: {\r\n                    \"click\": () => {\r\n                      return this.onAdd(data);\r\n                    }\r\n                  }\r\n                },\r\n                [\"\"]\r\n              ),\r\n                h(\r\n                  \"el-button\",\r\n                  {\r\n                    style: data.parent_id ? \"\" : \"display:none;\",\r\n                    attrs: {\r\n                      type: \"info\",\r\n                      size: \"mini\",\r\n                      icon: \"edit\"\r\n                    },\r\n                    on: {\r\n                      \"click\": () => {\r\n                        return this.onEdit(data);\r\n                      }\r\n                    }\r\n                  },\r\n                  [\"\"]\r\n                ),\r\n                h(\r\n                  \"el-button\",\r\n                  {\r\n                    style: data.parent_id && !data.children.length ? \"\" : \"display:none;\",\r\n                    attrs: {\r\n                      type: \"danger\",\r\n                      size: \"mini\",\r\n                      icon: \"delete\",\r\n                      \"v-popover\": \"popover5\"\r\n                    },\r\n                    on: {\r\n                      \"click\": () => {\r\n                        return this.onRemove(data);\r\n                      }\r\n                    }\r\n                  },\r\n                  [\"\"]\r\n                )]\r\n            )]\r\n        )\r\n      },\r\n    },\r\n    created() {\r\n      this.init();\r\n    }\r\n  };\r\n</script>\r\n<style lang=\"stylus\">\r\n  .option-button-group\r\n    float: right;\r\n    margin-right: 20px;\r\n\r\n  /*display: none;*/\r\n\r\n  .el-tree-node__content:hover\r\n    .option-button-group\r\n      display: block;\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/sites/admin/views/menu/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.isLoading),expression:\"isLoading\"}]},[_c('el-row',{staticClass:\"toolbar\"},[_c('div',{staticClass:\"pull-right\"},[_c('el-button',{attrs:{\"type\":\"danger\"},on:{\"click\":_vm.refreshMenu}},[_vm._v(\"批量删除\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"loading\":true},on:{\"click\":_vm.refreshMenu}},[_vm._v(\"刷新菜单\")])],1)]),_vm._v(\" \"),_c('el-row',[_c('el-col',{attrs:{\"span\":8}},[_c('el-tree',{attrs:{\"data\":_vm.menus,\"show-checkbox\":\"\",\"default-expand-all\":true,\"expand-on-click-node\":false,\"node-key\":\"id\",\"render-content\":_vm.renderContent,\"props\":_vm.menuProps},on:{\"node-click\":_vm.handleNodeClick}})],1),_vm._v(\" \"),_c('el-col',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isEdit),expression:\"isEdit\"}],attrs:{\"span\":16}},[_c('el-form',{ref:\"menuForm\",attrs:{\"model\":_vm.menu,\"rules\":_vm.rules,\"label-width\":\"120px\"}},[_c('el-form-item',{attrs:{\"label\":\"父节点名称\"}},[_c('span',[_vm._v(_vm._s(_vm.menu.parent_title))])]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"菜单名称\",\"prop\":\"title\"}},[_c('el-input',{attrs:{\"placeholder\":\"请选择菜单名称\"},model:{value:(_vm.menu.title),callback:function ($$v) {_vm.$set(_vm.menu, \"title\", $$v)},expression:\"menu.title\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"菜单地址\",\"prop\":\"route\"}},[_c('el-input',{attrs:{\"placeholder\":\"请选择菜单地址\"},model:{value:(_vm.menu.route),callback:function ($$v) {_vm.$set(_vm.menu, \"route\", $$v)},expression:\"menu.route\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"是否启用\"}},[_c('el-switch',{attrs:{\"on-text\":\"\",\"off-text\":\"\"},model:{value:(_vm.menu.is_enabled),callback:function ($$v) {_vm.$set(_vm.menu, \"is_enabled\", $$v)},expression:\"menu.is_enabled\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label-width\":\"120px\"}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.onSubmit}},[_vm._v(_vm._s(_vm.menu.id ? '更新' : '新增'))]),_vm._v(\" \"),_c('el-button',{on:{\"click\":_vm.onCancel}},[_vm._v(\"取消\")])],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-2e7079d9\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/sites/admin/views/menu/index.vue\n// module id = null\n// module chunks = ","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2e7079d9\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../../../node_modules/stylus-loader/index.js?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./index.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"15afa488\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/extract-text-webpack-plugin/dist/loader.js?{\"omit\":1,\"remove\":true}!./node_modules/vue-style-loader!./node_modules/css-loader?{\"sourceMap\":true}!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-2e7079d9\",\"scoped\":false,\"hasInlineConfig\":false}!./node_modules/stylus-loader?{\"sourceMap\":true}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/sites/admin/views/menu/index.vue\n// module id = oY9j\n// module chunks = 8","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \"\\n.option-button-group {\\n  float: right;\\n  margin-right: 20px;\\n}\\n/*display: none;*/\\n.el-tree-node__content:hover .option-button-group {\\n  display: block;\\n}\", \"\", {\"version\":3,\"sources\":[\"E:/mine/codehuang/frontend/src/sites/admin/views/menu/index.vue\"],\"names\":[],\"mappings\":\";AACA;EACE,aAAa;EACb,mBAAmB;CACpB;AACD,kBAAkB;AAClB;EACE,eAAe;CAChB\",\"file\":\"index.vue\",\"sourcesContent\":[\"\\n.option-button-group {\\n  float: right;\\n  margin-right: 20px;\\n}\\n/*display: none;*/\\n.el-tree-node__content:hover .option-button-group {\\n  display: block;\\n}\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?{\"sourceMap\":true}!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-2e7079d9\",\"scoped\":false,\"hasInlineConfig\":false}!./node_modules/stylus-loader?{\"sourceMap\":true}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/sites/admin/views/menu/index.vue\n// module id = z7zx\n// module chunks = 8"],"sourceRoot":""}