webpackJsonp([8],{"6OxN":function(e,n,t){"use strict";function i(e){t("oY9j")}Object.defineProperty(n,"__esModule",{value:!0});var o=t("//Fk"),r=t.n(o),s=t("woOf"),l=t.n(s),a=(t("7+uW"),t("DyH8")),u=t("c2kk"),c={data:function(){return{menus:[],menuProps:{children:"children",label:"title"},menu:{id:0,title:"",parent_id:0,parent_title:"",route:"",is_enabled:!0,children:[]},rules:{title:[{required:!0,message:"请输入菜单名称",trigger:"blur"},{max:10,message:"长度在10个字符以内",trigger:"blur"}],route:[{required:!0,message:"请输入菜单地址",trigger:"blur"}]},isEdit:!1,isLoading:!1}},methods:{init:function(){this.query()},query:function(){var e=this;this.isLoading=!0,u.a.query().then(function(n){a.a.arrayToTree(n).then(function(n){e.menus=n,e.isLoading=!1})})},resetForm:function(){this.$refs.menuForm.resetFields()},onSubmit:function(){var e=this;this.$refs.menuForm.validate(function(n){if(!n)return console.log("error submit!!"),!1;var t=l()({},e.menu),i=t.id;t.id=void 0,t.parent_title=void 0,t.children=void 0,r.a.resolve(i?u.a.update(i,t):u.a.create(t)).then(function(n){e.onCancel(),e.query()})})},onCancel:function(){this.isEdit=!1},refreshMenu:function(){},handleNodeClick:function(e){},onAdd:function(e){l()(this.menu,{id:0,title:"",parent_id:e.id,parent_title:e.title,route:"",is_enabled:!0}),this.isEdit=!0},onEdit:function(e){l()(this.menu,e),this.isEdit=!0},onRemove:function(e){var n=this;this.$confirm("此操作将永久删除该菜单及其子菜单, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){u.a.remove(e.id).then(function(e){n.$message({type:"success",message:"删除成功!"}),n.query()})}).catch(function(){n.$message({type:"info",message:"已取消删除"})})},renderContent:function(e,n){var t=this,i=n.node,o=n.data;n.store;return e("span",null,[e("span",{class:"el-tree-node__label"},[e("span",null,i.label+(o.route?" ---- "+o.route:""))]),e("span",{class:"option-button-group"},[e("el-button",{style:i.level<3?"":"display:none;",attrs:{type:"success",size:"mini",icon:"plus"},on:{click:function(){return t.onAdd(o)}}},[""]),e("el-button",{style:o.parent_id?"":"display:none;",attrs:{type:"info",size:"mini",icon:"edit"},on:{click:function(){return t.onEdit(o)}}},[""]),e("el-button",{style:o.parent_id&&!o.children.length?"":"display:none;",attrs:{type:"danger",size:"mini",icon:"delete","v-popover":"popover5"},on:{click:function(){return t.onRemove(o)}}},[""])])])}},created:function(){this.init()}},d=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}]},[t("el-row",{staticClass:"toolbar"},[t("div",{staticClass:"pull-right"},[t("el-button",{attrs:{type:"danger"},on:{click:e.refreshMenu}},[e._v("批量删除")]),e._v(" "),t("el-button",{attrs:{type:"primary",loading:!0},on:{click:e.refreshMenu}},[e._v("刷新菜单")])],1)]),e._v(" "),t("el-row",[t("el-col",{attrs:{span:8}},[t("el-tree",{attrs:{data:e.menus,"show-checkbox":"","default-expand-all":!0,"expand-on-click-node":!1,"node-key":"id","render-content":e.renderContent,props:e.menuProps},on:{"node-click":e.handleNodeClick}})],1),e._v(" "),t("el-col",{directives:[{name:"show",rawName:"v-show",value:e.isEdit,expression:"isEdit"}],attrs:{span:16}},[t("el-form",{ref:"menuForm",attrs:{model:e.menu,rules:e.rules,"label-width":"120px"}},[t("el-form-item",{attrs:{label:"父节点名称"}},[t("span",[e._v(e._s(e.menu.parent_title))])]),e._v(" "),t("el-form-item",{attrs:{label:"菜单名称",prop:"title"}},[t("el-input",{attrs:{placeholder:"请选择菜单名称"},model:{value:e.menu.title,callback:function(n){e.$set(e.menu,"title",n)},expression:"menu.title"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"菜单地址",prop:"route"}},[t("el-input",{attrs:{placeholder:"请选择菜单地址"},model:{value:e.menu.route,callback:function(n){e.$set(e.menu,"route",n)},expression:"menu.route"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"是否启用"}},[t("el-switch",{attrs:{"on-text":"","off-text":""},model:{value:e.menu.is_enabled,callback:function(n){e.$set(e.menu,"is_enabled",n)},expression:"menu.is_enabled"}})],1),e._v(" "),t("el-form-item",{attrs:{"label-width":"120px"}},[t("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v(e._s(e.menu.id?"更新":"新增"))]),e._v(" "),t("el-button",{on:{click:e.onCancel}},[e._v("取消")])],1)],1)],1)],1)],1)},p=[],m={render:d,staticRenderFns:p},f=m,h=t("VU/8"),v=i,b=h(c,f,!1,v,null,null);n.default=b.exports},oY9j:function(e,n,t){var i=t("z7zx");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);t("rjj0")("15afa488",i,!0)},z7zx:function(e,n,t){n=e.exports=t("FZ+f")(!0),n.push([e.i,"\n.option-button-group {\n  float: right;\n  margin-right: 20px;\n}\n/*display: none;*/\n.el-tree-node__content:hover .option-button-group {\n  display: block;\n}","",{version:3,sources:["E:/mine/codehuang/frontend/src/sites/admin/views/menu/index.vue"],names:[],mappings:";AACA;EACE,aAAa;EACb,mBAAmB;CACpB;AACD,kBAAkB;AAClB;EACE,eAAe;CAChB",file:"index.vue",sourcesContent:["\n.option-button-group {\n  float: right;\n  margin-right: 20px;\n}\n/*display: none;*/\n.el-tree-node__content:hover .option-button-group {\n  display: block;\n}"],sourceRoot:""}])}});
//# sourceMappingURL=8.677dc61cdc093181c134.js.map